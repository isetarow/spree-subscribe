<!-- insert_before '.add-to-cart' -->
<% if @product.subscribable? && @product.subscription_intervals.any? %>
  <%- #DD: when supporting multiple variants at a time: variant_id = @product.has_variants? ? @product.variants.first.id : @product.master.id %>
  <div>
    <%= radio_button_tag "subscriptions[active]", 0, true %> 一度のみの購入
  </div>
  <div>
    <%= radio_button_tag "subscriptions[active]", 1 %>
    <% if @product.subscription_intervals.count > 1 %>
      <%- options = @product.subscription_intervals.collect{|i| [i.name,i.id] } %>
      <%= select_tag "subscriptions[interval_id]", options_for_select(options) %>
    <% else %>
      <%- # render just the name of the subscription we want %>
      <% interval = @product.subscription_intervals.first %>
      <%= interval.name %>毎に購入.
      <%= hidden_field_tag "subscriptions[interval_id]", interval.id %>
    <% end %>
    <% if @product.subscribed_price %>
      <% price_difference = Spree::Money.new(@product.price - @product.subscribed_price) %>
      <span class="price-saved"><%= price_difference.to_html %>OFF!</span>
    <% end %>
  </div>
<% end %>
